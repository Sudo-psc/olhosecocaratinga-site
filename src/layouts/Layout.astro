---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
export interface Props {
    title: string;
    description?: string;
    image?: string;
    type?: string;
    canonical?: string;
}

const { title, description, image, type = "website", canonical } = Astro.props;

const canonicalUrl = canonical || new URL(Astro.url.pathname, Astro.site).href;

// Meta tags básicas
const meta = {
    title,
    description: description || "Saraiva Vision Clínica Especializada em Olho Seco - Caratinga/MG",
    image: image || "/icons/e_eye_machine_made_in_france_anvisa_logo.jpg",
    url: canonicalUrl,
    type,
    siteName: "Saraiva Vision Clínica Especializada em Olho Seco",
    locale: "pt_BR"
};

// Structured Data para a clínica
const structuredData = {
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "LocalBusiness",
            "@id": "https://olhosecocaratinga.com.br/#clinic",
            name: "Saraiva Vision",
            description: "Clínica especializada em tratamento de olho seco e doenças oculares em Caratinga, MG",
            url: "https://olhosecocaratinga.com.br",
            telephone: "(33) 99860-1427",
            email: "contato@saraivavision.com.br",
            address: {
                "@type": "PostalAddress",
                streetAddress: "Rua Catarina Maria Passos, 97",
                addressLocality: "Caratinga (Amor e Saúde - Bairro Santa Zita)",
                addressRegion: "MG",
                postalCode: "35300-299",
                addressCountry: "BR"
            },
            openingHours: [
                "Mo-Fr 08:00-18:00",
                "Sa 08:00-12:00"
            ],
            priceRange: "$$",
            paymentAccepted: ["Cash", "Credit Card", "Debit Card"],
            currenciesAccepted: "BRL",
            image: meta.image,
            geo: {
                "@type": "GeoCoordinates",
                latitude: "-19.7925",
                longitude: "-42.1447"
            }
        },
        {
            "@type": "Physician",
            "@id": "https://olhosecocaratinga.com.br/#doctor",
            name: "Dr. Philipe Saraiva Cruz",
            // Título formal completo para conformidade CFM em structured data
            jobTitle: "Médico pós-graduado em oftalmologia área de atuação oftalmologia clínica, procedimentos cirúrgicos minimamente invasivos e olho seco",
            specializesIn: "Olho Seco e Superfície Ocular",
            description: "Médico pós-graduado em oftalmologia com área de atuação em oftalmologia clínica geral, procedimentos minimamente invasivos e olho seco",
            worksFor: {
                "@type": "Organization",
                name: "Saraiva Vision"
            },
            medicalSpecialty: "Oftalmologia",
            knowsAbout: ["Olho Seco", "Superfície Ocular", "Cirurgia Ocular Minimamente Invasiva"],
            url: "https://olhosecocaratinga.com.br"
        },
        {
            "@type": "WebPage",
            "@id": canonicalUrl,
            url: canonicalUrl,
            name: title,
            description: meta.description,
            isPartOf: {
                "@type": "WebSite",
                "@id": "https://olhosecocaratinga.com.br/#website"
            },
            about: {
                "@type": "Thing",
                name: "Olho Seco"
            },
            mainEntity: {
                "@type": "MedicalCondition",
                name: "Olho Seco",
                alternateName: "Síndrome do Olho Seco",
                description: "Condição ocular caracterizada por falta de lubrificação adequada na superfície do olho"
            }
        },
        {
            "@type": "WebSite",
            "@id": "https://olhosecocaratinga.com.br/#website",
            url: "https://olhosecocaratinga.com.br",
            name: "Olho Seco Caratinga",
            description: "Clínica especializada em tratamento de olho seco em Caratinga, MG",
            publisher: {
                "@type": "Organization",
                name: "Saraiva Vision"
            },
            inLanguage: "pt-BR",
            potentialAction: {
                "@type": "SearchAction",
                target: {
                    "@type": "EntryPoint",
                    urlTemplate: "https://olhosecocaratinga.com.br/search?q={search_term_string}"
                },
                "query-input": "required name=search_term_string"
            }
        },
        {
            "@type": "BreadcrumbList",
            "@id": canonicalUrl + "#breadcrumb",
            itemListElement: [
                {
                    "@type": "ListItem",
                    position: 1,
                    name: "Início",
                    item: "https://olhosecocaratinga.com.br"
                },
                {
                    "@type": "ListItem",
                    position: 2,
                    name: title,
                    item: canonicalUrl
                }
            ]
        }
    ]
};
---

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="description" content={meta.description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={meta.type} />
    <meta property="og:url" content={meta.url} />
    <meta property="og:title" content={meta.title} />
    <meta property="og:description" content={meta.description} />
    <meta property="og:image" content={meta.image} />
    <meta property="og:site_name" content={meta.siteName} />
    <meta property="og:locale" content={meta.locale} />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={meta.url} />
    <meta property="twitter:title" content={meta.title} />
    <meta property="twitter:description" content={meta.description} />
    <meta property="twitter:image" content={meta.image} />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalUrl} />
    
    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//www.googletagmanager.com" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Structured Data -->
    <script is:inline type="application/ld+json" set:html={JSON.stringify(structuredData)} />
    
    <!-- Title -->
    <title>{meta.title}</title>
    
    <!-- Styles -->
    <style is:global>
        :root {
            --primary: #003D7A; /* Deep Blue retained for strong contrast/headings */
            --primary-light: #22d3ee; /* Cyan-400 for accents/hover */
            --secondary: #64748b; /* Slate-500 for secondary text */
            --accent: #ecfeff; /* Cyan-50 for backgrounds */
            --text-main: #1e293b; /* Slate-800 for main text */
            --text-muted: #475569; /* Slate-600 */
            --bg-body: #f8fafc; /* Slate-50 for global background (Silver-ish) */
            --bg-alt: #ffffff; /* White for cards */
            --border: #e2e8f0; /* Slate-200 */
            --radius-sm: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-main);
            background-color: var(--bg-body);
            -webkit-font-smoothing: antialiased;
        }
        
        h1, h2, h3, h4, .font-heading {
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            line-height: 1.2;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }

        /* Responsive spacing utilities */
        .section-padding {
            padding-top: 5rem;
            padding-bottom: 5rem;
        }
        @media (max-width: 768px) {
            .section-padding {
                padding-top: 3.5rem;
                padding-bottom: 3.5rem;
            }
        }

        .btn-premium {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.875rem 2rem;
            font-weight: 600;
            border-radius: var(--radius-md);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            gap: 0.5rem;
        }

        .btn-premium-primary {
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); /* Cyan to Blue Gradient */
            color: white;
            box-shadow: 0 10px 15px -3px rgba(6, 182, 212, 0.3); /* Cyan shadow */
            border: none;
        }

        .btn-premium-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(6, 182, 212, 0.4);
            filter: brightness(1.1);
        }

        .btn-premium-secondary {
            background-color: white;
            color: var(--primary);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .btn-premium-secondary:hover {
            border-color: var(--primary);
            background-color: var(--bg-alt);
            transform: translateY(-2px);
        }

        /* Glassmorphism utility */
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <Header />
    <main class="pt-20"> <!-- Added padding-top to account for fixed header -->
        <slot />
    </main>
    <Footer />
</body>
</html>
