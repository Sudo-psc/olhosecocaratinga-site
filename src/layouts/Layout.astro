---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
export interface Props {
    title: string;
    description?: string;
    image?: string;
    type?: string;
    canonical?: string;
}

const { title, description, image, type = "website", canonical } = Astro.props;

const canonicalUrl = canonical || new URL(Astro.url.pathname, Astro.site).href;

// Meta tags básicas
const meta = {
    title,
    description: description || "Clínica Oftalmológica em Caratinga - Tratamento especializado para olho seco e outras condições oculares",
    image: image || "/og-image.jpg",
    url: canonicalUrl,
    type,
    siteName: "Olho Seco Caratinga",
    locale: "pt_BR"
};

// Structured Data para a clínica
const structuredData = {
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "LocalBusiness",
            "@id": "https://olhosecocaratinga.com/#clinic",
            name: "Clínica Oftalmológica Caratinga",
            description: "Clínica especializada em tratamento de olho seco e doenças oculares em Caratinga, MG",
            url: "https://olhosecocaratinga.com",
            telephone: "(33) 98765-4321",
            email: "contato@olhosecocaratinga.com",
            address: {
                "@type": "PostalAddress",
                streetAddress: "Rua Principal, 123",
                addressLocality: "Caratinga",
                addressRegion: "MG",
                postalCode: "35300-000",
                addressCountry: "BR"
            },
            openingHours: [
                "Mo-Fr 08:00-18:00",
                "Sa 08:00-12:00"
            ],
            priceRange: "$$",
            paymentAccepted: ["Cash", "Credit Card", "Debit Card"],
            currenciesAccepted: "BRL",
            image: meta.image,
            geo: {
                "@type": "GeoCoordinates",
                latitude: "-19.7925",
                longitude: "-42.1447"
            }
        },
        {
            "@type": "Physician",
            "@id": "https://olhosecocaratinga.com/#doctor",
            name: "Dr. João Silva",
            jobTitle: "Oftalmologista",
            specializesIn: "Oftalmologia",
            description: "Médico oftalmologista especialista em tratamento de olho seco",
            worksFor: {
                "@type": "Organization",
                name: "Clínica Oftalmológica Caratinga"
            },
            medicalSpecialty: "Oftalmologia",
            knowsAbout: ["Olho Seco", "Doenças Oculares", "Cirurgia Ocular"],
            url: "https://olhosecocaratinga.com"
        },
        {
            "@type": "WebPage",
            "@id": canonicalUrl,
            url: canonicalUrl,
            name: title,
            description: meta.description,
            isPartOf: {
                "@type": "WebSite",
                "@id": "https://olhosecocaratinga.com/#website"
            },
            about: {
                "@type": "Thing",
                name: "Olho Seco"
            },
            mainEntity: {
                "@type": "MedicalCondition",
                name: "Olho Seco",
                alternateName: "Síndrome do Olho Seco",
                description: "Condição ocular caracterizada por falta de lubrificação adequada na superfície do olho"
            }
        },
        {
            "@type": "WebSite",
            "@id": "https://olhosecocaratinga.com/#website",
            url: "https://olhosecocaratinga.com",
            name: "Olho Seco Caratinga",
            description: "Clínica oftalmológica especializada em tratamento de olho seco em Caratinga, MG",
            publisher: {
                "@type": "Organization",
                name: "Clínica Oftalmológica Caratinga"
            },
            inLanguage: "pt-BR",
            potentialAction: {
                "@type": "SearchAction",
                target: {
                    "@type": "EntryPoint",
                    urlTemplate: "https://olhosecocaratinga.com/search?q={search_term_string}"
                },
                "query-input": "required name=search_term_string"
            }
        },
        {
            "@type": "BreadcrumbList",
            "@id": canonicalUrl + "#breadcrumb",
            itemListElement: [
                {
                    "@type": "ListItem",
                    position: 1,
                    name: "Início",
                    item: "https://olhosecocaratinga.com"
                },
                {
                    "@type": "ListItem",
                    position: 2,
                    name: title,
                    item: canonicalUrl
                }
            ]
        }
    ]
};
---

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="description" content={meta.description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={meta.type} />
    <meta property="og:url" content={meta.url} />
    <meta property="og:title" content={meta.title} />
    <meta property="og:description" content={meta.description} />
    <meta property="og:image" content={meta.image} />
    <meta property="og:site_name" content={meta.siteName} />
    <meta property="og:locale" content={meta.locale} />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={meta.url} />
    <meta property="twitter:title" content={meta.title} />
    <meta property="twitter:description" content={meta.description} />
    <meta property="twitter:image" content={meta.image} />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalUrl} />
    
    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//www.googletagmanager.com" />
    
    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    
    <!-- Structured Data -->
    <script is:inline type="application/ld+json" set:html={JSON.stringify(structuredData)} />
    
    <!-- Title -->
    <title>{meta.title}</title>
    
    <!-- Styles -->
    <style is:global>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --background: #ffffff;
            --background-secondary: #f9fafb;
            --border-color: #e5e7eb;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background);
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        a:hover {
            color: var(--secondary-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        
        .btn-secondary {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }
        
        .btn-secondary:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }
        
        .section {
            padding: 80px 0;
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .section {
                padding: 60px 0;
            }
            
            .section-title {
                font-size: 2rem;
                margin-bottom: 2rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <Header />
    <main class="pt-20"> <!-- Added padding-top to account for fixed header -->
        <slot />
    </main>
    <Footer />
</body>
</html>
